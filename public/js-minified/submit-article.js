import{URL,isJson,newTokenData}from"./script.js";const postBtn=document.querySelector("#submit-post");postBtn.addEventListener("click",()=>{const e=newTokenData({title:document.querySelector("#title").value,tagline:document.querySelector("#tagline").value,content:document.querySelector(".ql-editor").innerHTML,tags:document.querySelector("#tags").value});fetch(`${URL}/ajax/write/submit-article`,{method:"POST",body:e}).then(e=>e.text()).then(e=>{if(isJson(e)){let t=document.getElementById("draft-err-toast"),o=new bootstrap.Toast(t,{delay:6e3}),n=JSON.parse(e);200===n.status?location.replace(`${URL}/article?a=${n.article_id}`):(delete n.status,t.querySelector(".toast-body").innerHTML=`${n[Object.keys(n)[0]]}`,o.show())}})});