import{ht,isJson,URL,LiveLoader,loginMdl,newTokenData}from"./script.js";const uniq=document.querySelector("[name='uniq_id']").value,bodyLoader=new LiveLoader;bodyLoader.addIdSelector("[name='last_follower_id']"),bodyLoader.addBtn("#show-more"),bodyLoader.addParams({profile_uniq:uniq}),bodyLoader.addEndPoint("ajax/profile/load-followers"),bodyLoader.addListener(o=>{Object.entries(o.followers).forEach(([o,n])=>{const e=n;let t="";e.show_btn&&e.show_btn&&(t=`<button class="btn mb-1 follow-btn btn-outline-primary float-end rounded ${e.is_following?"active":""}" \n            data-uniq="${e.uniq_id}">\n                ${e.is_following?"Following":"Follow"}\n            </button>`),document.querySelector(".list-container").innerHTML+=`\n            <div class="p-2 row mb-0 pb-1">\n            <div class="col-2 text-center">\n                <div class="follow-list-img" style='background-image: url(${URL}/uploads/${e.profile_img});'></div>\n            </div>\n            <div class="col-10">\n                <h6 class='d-inline-block'>\n                    <a href="${URL}/profile?u=${e.username}" class='text-dark text-decoration-none'>${ht(e.display_name)}</a>\n                </h6>\n                ${t}\n                <p class="text-muted">@${ht(e.username)}</p>\n            </div>\n        </div>\n        `})}),document.addEventListener("click",function(o){const n=o.target;if(n.classList.contains("follow-btn")){const o=newTokenData({profile_uniq:n.getAttribute("data-uniq")});fetch(`${URL}/ajax/profile/toggle-follow`,{method:"POST",body:o}).then(o=>o.text()).then(o=>{if(isJson(o)){200===JSON.parse(o).status&&(n.classList.toggle("active"),"Follow"==n.innerHTML.trim()?n.innerHTML="Following":n.innerHTML="Follow")}else loginMdl()})}});